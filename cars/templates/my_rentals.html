{% extends 'base.html' %}
{% block content %}
<h2>My Rentals</h2>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Car</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Total Price</th>
            <th>Status</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for rental in rentals %}
        <tr>
            <td>{{ rental.car.car_make }} {{ rental.car.car_model }}</td>
            <td>{{ rental.start_date }}</td>
            <td>{{ rental.end_date }}</td>
            <td>${{ rental.total_price }}</td>
            <td>
                {% if rental.returned %}
                    <span class="text-success">Returned</span>
                {% else %}
                    <span class="text-danger">Active</span>
                {% endif %}
            </td>
            <td>
                {% if not rental.returned %}
                    <form method="post" action="{% url 'return_car' rental.pk %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-success">Return Car</button>
                    </form>
                {% endif %}
            </td>
        </tr>
        {% empty %}
            <tr><td colspan="6">You havenâ€™t rented any cars yet.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
